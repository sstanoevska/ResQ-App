<EditProfileScreen>:
    name: "edit_profile_screen"
    BoxLayout:
        orientation: 'vertical'
        padding: [30, 30, 30, 30]
        spacing: 20
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # White background
            Rectangle:
                size: self.size
                pos: self.pos

        # Top section with Back arrow and Title
        MDBoxLayout:
            size_hint_y: None
            height: "60dp"
            padding: "10dp"
            spacing: "10dp"

        # Back arrow button
        MDTopAppBar:
            title: "Edit Your Profile"
            elevation: 4
            left_action_items: [["arrow-left", root.go_back]]  # Left action for back button
            md_bg_color: 0.27, 0.51, 0.71, 1  # Customize the background color
            title_color: 1, 1, 1, 1

        # ScrollView for input fields
        ScrollView:
            MDGridLayout:
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 20
                padding: "10dp"

                # Name input field
                MDTextField:
                    id: name_field
                    hint_text: "Enter your new name"
                    color_mode: 'custom'
                    text_color: 0, 0, 0, 1
                    hint_text_color_focus: 0, 0, 0, 1
                    hint_text_color_normal: 0, 0, 0, 1
                    line_color_normal: 0.38, 0.49, 0.55, 1
                    line_color_focus: 0.28, 0.39, 0.45, 1
                    mode: "filled"
                    size_hint_y: None
                    height: "70dp"

                # Username input field
                MDTextField:
                    id: username_field
                    hint_text: "Enter your new username"
                    color_mode: 'custom'
                    text_color: 0, 0, 0, 1
                    hint_text_color_focus: 0, 0, 0, 1
                    hint_text_color_normal: 0, 0, 0, 1
                    line_color_normal: 0.38, 0.49, 0.55, 1
                    line_color_focus: 0.28, 0.39, 0.45, 1
                    mode: "filled"
                    size_hint_y: None
                    height: "70dp"

                # Phone input field
                MDTextField:
                    id: phone_field
                    hint_text: "Enter your new phone number"
                    color_mode: 'custom'
                    text_color: 0, 0, 0, 1
                    hint_text_color_focus: 0, 0, 0, 1
                    hint_text_color_normal: 0, 0, 0, 1
                    line_color_normal: 0.38, 0.49, 0.55, 1
                    line_color_focus: 0.28, 0.39, 0.45, 1
                    mode: "filled"
                    size_hint_y: None
                    height: "70dp"
                    input_filter: "int"

                # Address field container
                MDBoxLayout:
                    id: address_container
                    orientation: "vertical"
                    size_hint_y: None
                    height: "70dp"

                    MDTextField:
                        id: address_field
                        hint_text: "Enter your new address"
                        color_mode: 'custom'
                        text_color: 0, 0, 0, 1
                        hint_text_color_focus: 0, 0, 0, 1
                        hint_text_color_normal: 0, 0, 0, 1
                        line_color_normal: 0.38, 0.49, 0.55, 1
                        line_color_focus: 0.28, 0.39, 0.45, 1
                        mode: "filled"
                        size_hint_y: None
                        height: "70dp"

                # Save Button
                MDButton:
                    text: "Update Profile"
                    style: "elevated"
                    size_hint: None, None
                    size: "200dp", "50dp"
                    pos_hint: {"center_x": 0.5}
                    md_bg_color: 0.27, 0.51, 0.71, 1
                    text_color: 0, 0, 0, 1
                    elevation: 0
                    on_release: root.update_profile()


                # Message Label (Success/Error message display)
                MDLabel:
                    id: message_label
                    text: ""
                    markup: True
                    theme_text_color: "Custom"
                    text_color: 0, 0.5, 0, 1
                    halign: "center"
                    valign: "middle"
                    size_hint_y: None
                    font_size: "16sp"
                    text_size: self.width, None
                    height: self.texture_size[1]
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0  # Transparent to remove any shadow
                        Rectangle:
                            size: self.size
                            pos: self.pos
